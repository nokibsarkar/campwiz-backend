basePath: /api/v2
definitions:
  consts.Language:
    enum:
    - am
    - ar
    - as
    - af
    - bn
    - zh
    - da
    - nl
    - en
    - fi
    - fr
    - de
    - el
    - gu
    - ha
    - hi
    - ig
    - it
    - ja
    - kn
    - ko
    - ml
    - mr
    - ne
    - "no"
    - or
    - om
    - fa
    - pt
    - pa
    - ru
    - sa
    - st
    - sn
    - sd
    - so
    - es
    - sw
    - sv
    - ta
    - te
    - ts
    - tn
    - tr
    - ur
    - '-'
    - ve
    - xh
    - yo
    - zu
    type: string
    x-enum-varnames:
    - Amharic
    - Arabic
    - Assamese
    - Afrikaans
    - Bangla
    - Chinese
    - Danish
    - Dutch
    - English
    - Finnish
    - French
    - German
    - Greek
    - Gujarati
    - Hausa
    - Hindi
    - Igbo
    - Italian
    - Japanese
    - Kannada
    - Korean
    - Malayalam
    - Marathi
    - Nepali
    - Norwegian
    - Odia
    - Oromo
    - Persian
    - Portuguese
    - Punjabi
    - Russian
    - Sanskrit
    - Sesotho
    - Shona
    - Sindhi
    - Somali
    - Spanish
    - Swahili
    - Swedish
    - Tamil
    - Telugu
    - Tsonga
    - Tswana
    - Turkish
    - Urdu
    - Undefined
    - Venda
    - Xhosa
    - Yoruba
    - Zulu
  database.Campaign:
    properties:
      campaignId:
        type: string
      createdAt:
        description: read only
        type: string
      createdById:
        type: string
      description:
        type: string
      endDate:
        type: string
      image:
        type: string
      language:
        $ref: '#/definitions/consts.Language'
      name:
        type: string
      roles:
        items:
          $ref: '#/definitions/database.Role'
        type: array
      rules:
        type: string
      startDate:
        type: string
    type: object
  database.Evaluation:
    properties:
      comment:
        type: string
      createdAt:
        type: string
      distributionTaskId:
        type: string
      evaluatedAt:
        type: string
      evaluationId:
        type: string
      judgeId:
        type: string
      participantId:
        type: string
      score:
        description: Applicable if the evaluation type is score, it would be between
          0-100
        type: integer
      serial:
        type: integer
      submissionId:
        type: string
      type:
        $ref: '#/definitions/database.EvaluationType'
      updatedAt:
        type: string
      votePassed:
        description: Applicable if the evaluation type is binary, it would be true
          or false
        type: boolean
      votePosition:
        description: |-
          Applicable if the evaluation type is binary, it would be 0 to Number of submissions in this round
          The pair (JudgeID, VotePosition) should be unique (i.e. a judge can't vote for the same position twice)
        type: integer
    type: object
  database.EvaluationType:
    enum:
    - ranking
    - score
    - binary
    type: string
    x-enum-varnames:
    - EvaluationTypeRanking
    - EvaluationTypeScore
    - EvaluationTypeBinary
  database.MediaType:
    enum:
    - ARTICLE
    - BITMAP
    - AUDIO
    - VIDEO
    - PDF
    type: string
    x-enum-varnames:
    - MediaTypeArticle
    - MediaTypeImage
    - MediaTypeAudio
    - MediaTypeVideo
    - MediaTypePDF
  database.Role:
    properties:
      campaignId:
        type: string
      isAllowed:
        type: boolean
      roleId:
        type: string
      roundId:
        type: string
      totalAssigned:
        type: integer
      totalEvaluated:
        type: integer
      totalScore:
        type: integer
      type:
        $ref: '#/definitions/database.RoleType'
      userId:
        type: string
    type: object
  database.RoleType:
    enum:
    - jury
    - admin
    - participant
    - coordinator
    - organizer
    type: string
    x-enum-varnames:
    - RoleTypeJury
    - RoleTypeAdmin
    - RoleTypeParticipant
    - RoleTypeCoordinator
    - RoleTypeOrganizer
  database.Round:
    properties:
      allowCreations:
        type: boolean
      allowExpansions:
        type: boolean
      allowJuryToParticipate:
        type: boolean
      allowMultipleJudgement:
        type: boolean
      allowedMediaTypes:
        items:
          $ref: '#/definitions/database.MediaType'
        type: array
      blacklist:
        type: string
      campaignId:
        type: string
      createdAt:
        type: string
      createdById:
        type: string
      dependsOnRoundId:
        type: string
      description:
        type: string
      endDate:
        type: string
      isOpen:
        type: boolean
      isPublic:
        type: boolean
      latestTaskId:
        type: string
      maximumSubmissionOfSameArticle:
        type: integer
      minimumAddedBytes:
        type: integer
      minimumAddedWords:
        type: integer
      minimumDurationMilliseconds:
        type: integer
      minimumHeight:
        type: integer
      minimumResolution:
        type: integer
      minimumTotalBytes:
        type: integer
      minimumTotalWords:
        type: integer
      minimumWidth:
        type: integer
      name:
        type: string
      roles:
        items:
          $ref: '#/definitions/database.Role'
        type: array
      roundId:
        type: string
      secretBallot:
        type: boolean
      serial:
        type: integer
      startDate:
        type: string
      status:
        $ref: '#/definitions/database.RoundStatus'
      totalSubmissions:
        type: integer
      type:
        $ref: '#/definitions/database.EvaluationType'
    type: object
  database.RoundStatus:
    enum:
    - PENDING
    - IMPORTING
    - DISTRIBUTING
    - EVALUATING
    - REJECTED
    - CANCELLED
    - PAUSED
    - SCHEDULED
    - ACTIVE
    - COMPLETED
    type: string
    x-enum-varnames:
    - RoundStatusPending
    - RoundStatusImporting
    - RoundStatusDistributing
    - RoundStatusEvaluating
    - RoundStatusRejected
    - RoundStatusCancelled
    - RoundStatusPaused
    - RoundStatusScheduled
    - RoundStatusActive
    - RoundStatusCompleted
  database.Submission:
    properties:
      author:
        description: The Actual Author in the Wikimedia
        type: string
      bitrate:
        description: in kbps
        type: integer
      campaignId:
        type: string
      createdAtServer:
        description: Campaign          *Campaign  `json:"-" gorm:"foreignKey:CampaignID"`
        type: string
      creditHTML:
        type: string
      currentRoundId:
        type: string
      description:
        type: string
      duration:
        description: in milliseconds
        type: integer
      height:
        type: integer
      license:
        type: string
      mediatype:
        $ref: '#/definitions/database.MediaType'
      metadata:
        items:
          type: integer
        type: array
      pageid:
        type: string
      participantId:
        type: string
      size:
        description: in bytes
        type: integer
      submittedAt:
        type: string
      submittedById:
        description: The User who submitted the article on behalf of the participant
        type: string
      thumbheight:
        type: integer
      thumburl:
        type: string
      thumbwidth:
        type: integer
      title:
        type: string
      url:
        type: string
      width:
        type: integer
    type: object
  database.Task:
    properties:
      campaignId:
        type: string
      createdAt:
        type: string
      createdById:
        type: string
      data:
        items:
          type: integer
        type: array
      failedCount:
        type: integer
      failedIds:
        type: object
      remainingCount:
        type: integer
      roundId:
        type: string
      status:
        $ref: '#/definitions/database.TaskStatus'
      successCount:
        type: integer
      taskId:
        type: string
      type:
        $ref: '#/definitions/database.TaskType'
      updatedAt:
        type: string
      userId:
        type: string
    type: object
  database.TaskStatus:
    enum:
    - pending
    - running
    - success
    - failed
    type: string
    x-enum-varnames:
    - TaskStatusPending
    - TaskStatusRunning
    - TaskStatusSuccess
    - TaskStatusFailed
  database.TaskType:
    enum:
    - import.commons
    - distribute.evaluations
    type: string
    x-enum-varnames:
    - TaskTypeImportFromCommons
    - TaskTypeDistributeEvaluations
  routes.ResponseList-database_Campaign:
    properties:
      data:
        items:
          $ref: '#/definitions/database.Campaign'
        type: array
      next:
        type: string
      prev:
        type: string
    type: object
  routes.ResponseList-database_Evaluation:
    properties:
      data:
        items:
          $ref: '#/definitions/database.Evaluation'
        type: array
      next:
        type: string
      prev:
        type: string
    type: object
  routes.ResponseList-database_Round:
    properties:
      data:
        items:
          $ref: '#/definitions/database.Round'
        type: array
      next:
        type: string
      prev:
        type: string
    type: object
  routes.ResponseList-database_Submission:
    properties:
      data:
        items:
          $ref: '#/definitions/database.Submission'
        type: array
      next:
        type: string
      prev:
        type: string
    type: object
  routes.ResponseSingle-database_Evaluation:
    properties:
      data:
        $ref: '#/definitions/database.Evaluation'
    type: object
  routes.ResponseSingle-database_Round:
    properties:
      data:
        $ref: '#/definitions/database.Round'
    type: object
  routes.ResponseSingle-database_Task:
    properties:
      data:
        $ref: '#/definitions/database.Task'
    type: object
  routes.ResponseSingle-services_TaskResponse:
    properties:
      data:
        $ref: '#/definitions/services.TaskResponse'
    type: object
  services.CampaignCreateRequest:
    properties:
      allowCreations:
        type: boolean
      allowExpansions:
        type: boolean
      allowJuryToParticipate:
        type: boolean
      allowMultipleJudgement:
        type: boolean
      allowedMediaTypes:
        items:
          $ref: '#/definitions/database.MediaType'
        type: array
      blacklist:
        type: string
      coordinators:
        items:
          type: string
        type: array
      description:
        type: string
      endDate:
        type: string
      image:
        type: string
      language:
        $ref: '#/definitions/consts.Language'
      maximumSubmissionOfSameArticle:
        type: integer
      minimumAddedBytes:
        type: integer
      minimumAddedWords:
        type: integer
      minimumDurationMilliseconds:
        type: integer
      minimumHeight:
        type: integer
      minimumResolution:
        type: integer
      minimumTotalBytes:
        type: integer
      minimumTotalWords:
        type: integer
      minimumWidth:
        type: integer
      name:
        type: string
      organizers:
        items:
          type: string
        type: array
      roles:
        items:
          $ref: '#/definitions/database.Role'
        type: array
      rules:
        type: string
      secretBallot:
        type: boolean
      startDate:
        type: string
    type: object
  services.DistributionRequest:
    properties:
      juries:
        items:
          type: string
        type: array
    type: object
  services.EvaluationRequest:
    properties:
      comment:
        type: string
      evaluationId:
        type: string
      votePassed:
        type: boolean
      votePosition:
        type: integer
      voteScore:
        type: integer
    type: object
  services.ImportFromCommonsPayload:
    properties:
      categories:
        description: Categories from which images will be fetched
        items:
          type: string
        type: array
    type: object
  services.RoundRequest:
    properties:
      allowCreations:
        type: boolean
      allowExpansions:
        type: boolean
      allowJuryToParticipate:
        type: boolean
      allowMultipleJudgement:
        type: boolean
      allowedMediaTypes:
        items:
          $ref: '#/definitions/database.MediaType'
        type: array
      blacklist:
        type: string
      campaignId:
        type: string
      dependsOnRoundId:
        type: string
      description:
        type: string
      endDate:
        type: string
      isOpen:
        type: boolean
      isPublic:
        type: boolean
      jury:
        items:
          type: string
        type: array
      maximumSubmissionOfSameArticle:
        type: integer
      minimumAddedBytes:
        type: integer
      minimumAddedWords:
        type: integer
      minimumDurationMilliseconds:
        type: integer
      minimumHeight:
        type: integer
      minimumResolution:
        type: integer
      minimumTotalBytes:
        type: integer
      minimumTotalWords:
        type: integer
      minimumWidth:
        type: integer
      name:
        type: string
      secretBallot:
        type: boolean
      serial:
        type: integer
      startDate:
        type: string
      type:
        $ref: '#/definitions/database.EvaluationType'
    type: object
  services.TaskResponse:
    properties:
      campaignId:
        type: string
      createdAt:
        type: string
      createdById:
        type: string
      data:
        items:
          type: integer
        type: array
      failedCount:
        type: integer
      failedIds:
        type: object
      remainingCount:
        type: integer
      roundId:
        type: string
      status:
        $ref: '#/definitions/database.TaskStatus'
      successCount:
        type: integer
      taskId:
        type: string
      type:
        $ref: '#/definitions/database.TaskType'
      updatedAt:
        type: string
      userId:
        type: string
    type: object
host: localhost:8080
info:
  contact:
    email: nokibsarkar@gmail.com
    name: Nokib Sarkar
    url: https://github.com/nokibsarkar
  description: This is the API documentation for Campwiz
  license:
    name: GPL-3.0
    url: https://www.gnu.org/licenses/gpl-3.0.html
  title: Campwiz API
  version: "1"
paths:
  /campaign/:
    get:
      description: get all campaigns
      parameters:
      - collectionFormat: csv
        in: query
        items:
          type: string
        name: ids
        type: array
      - in: query
        name: limit
        type: integer
      - in: query
        name: next
        type: string
      - in: query
        name: prev
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/routes.ResponseList-database_Campaign'
      summary: List all campaigns
      tags:
      - Campaign
    post:
      description: Create a new campaign
      parameters:
      - description: The campaign request
        in: body
        name: campaignRequest
        required: true
        schema:
          $ref: '#/definitions/services.CampaignCreateRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/database.Campaign'
      summary: Create a new campaign
      tags:
      - Campaign
  /evaluation/:
    get:
      description: get all evaluations
      parameters:
      - in: query
        name: campaignId
        type: string
      - in: query
        name: juryId
        type: string
      - in: query
        name: limit
        type: integer
      - in: query
        name: next
        type: string
      - in: query
        name: prev
        type: string
      - in: query
        name: roundId
        type: string
      - in: query
        name: status
        type: boolean
      - in: query
        name: submissionId
        type: string
      - enum:
        - ranking
        - score
        - binary
        in: query
        name: type
        type: string
        x-enum-varnames:
        - EvaluationTypeRanking
        - EvaluationTypeScore
        - EvaluationTypeBinary
      - in: query
        name: userId
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/routes.ResponseList-database_Evaluation'
      security:
      - ApiKeyAuth: []
      summary: List all evaluations
      tags:
      - Evaluation
    post:
      description: Bulk evaluate
      parameters:
      - description: The evaluation request
        in: body
        name: evaluationRequest
        required: true
        schema:
          items:
            $ref: '#/definitions/services.EvaluationRequest'
          type: array
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/routes.ResponseList-database_Evaluation'
      security:
      - ApiKeyAuth: []
      summary: Bulk evaluate
      tags:
      - Evaluation
  /evaluation/{evaluationId}:
    post:
      description: Update an evaluation
      parameters:
      - description: The evaluation ID
        in: path
        name: evaluationId
        required: true
        type: string
      - description: The evaluation request
        in: body
        name: evaluationRequest
        required: true
        schema:
          $ref: '#/definitions/services.EvaluationRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/routes.ResponseSingle-database_Evaluation'
      security:
      - ApiKeyAuth: []
      summary: Update an evaluation
      tags:
      - Evaluation
  /round/:
    get:
      description: get all rounds
      parameters:
      - in: query
        name: campaignId
        type: string
      - in: query
        name: limit
        type: integer
      - in: query
        name: next
        type: string
      - in: query
        name: prev
        type: string
      - enum:
        - PENDING
        - IMPORTING
        - DISTRIBUTING
        - EVALUATING
        - REJECTED
        - CANCELLED
        - PAUSED
        - SCHEDULED
        - ACTIVE
        - COMPLETED
        in: query
        name: status
        type: string
        x-enum-varnames:
        - RoundStatusPending
        - RoundStatusImporting
        - RoundStatusDistributing
        - RoundStatusEvaluating
        - RoundStatusRejected
        - RoundStatusCancelled
        - RoundStatusPaused
        - RoundStatusScheduled
        - RoundStatusActive
        - RoundStatusCompleted
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/routes.ResponseList-database_Round'
      summary: List all rounds
      tags:
      - Round
    post:
      description: Create a new round for a campaign
      parameters:
      - description: The round request
        in: body
        name: roundRequest
        required: true
        schema:
          $ref: '#/definitions/services.RoundRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/routes.ResponseSingle-database_Round'
      summary: Create a new round
      tags:
      - Round
  /round/{roundId}:
    post:
      description: Update the details of a round
      parameters:
      - description: The round ID
        in: path
        name: roundId
        required: true
        type: string
      - description: The round request
        in: body
        name: roundRequest
        required: true
        schema:
          $ref: '#/definitions/services.RoundRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/routes.ResponseSingle-database_Round'
      summary: Update the details of a round
      tags:
      - Round
  /round/distribute/{roundId}:
    post:
      description: Distribute evaluations to juries
      parameters:
      - description: The round ID
        in: path
        name: roundId
        required: true
        type: string
      - description: The distribution request
        in: body
        name: DistributionRequest
        required: true
        schema:
          $ref: '#/definitions/services.DistributionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/routes.ResponseSingle-database_Task'
      summary: Distribute evaluations to juries
      tags:
      - Round
  /round/distribute/{roundId}/simulate:
    post:
      description: Simulate distributing evaluations to juries
      parameters:
      - description: The round ID
        in: path
        name: roundId
        required: true
        type: string
      - description: The distribution request
        in: body
        name: DistributionRequest
        required: true
        schema:
          $ref: '#/definitions/services.DistributionRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/routes.ResponseSingle-database_Task'
      summary: Simulate distributing evaluations to juries
      tags:
      - Round
  /round/import/{roundId}/commons:
    post:
      description: The user would provide a round ID and a list of commons categories
        and the system would import images from those categories
      parameters:
      - description: The round ID
        in: path
        name: roundId
        required: true
        type: string
      - description: The import from commons request
        in: body
        name: ImportFromCommons
        required: true
        schema:
          $ref: '#/definitions/services.ImportFromCommonsPayload'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/routes.ResponseSingle-database_Task'
      summary: Import images from commons
      tags:
      - Round
  /submission/:
    get:
      description: get all submissions
      parameters:
      - in: query
        name: campaignId
        type: string
      - in: query
        name: limit
        type: integer
      - in: query
        name: next
        type: string
      - in: query
        name: participantId
        type: string
      - in: query
        name: prev
        type: string
      - in: query
        name: roundId
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/routes.ResponseList-database_Submission'
      summary: List all submissions
      tags:
      - Submission
  /task/{taskId}:
    get:
      description: The task represents a background job that can be run by the system
      parameters:
      - description: The task ID
        in: path
        name: taskId
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/routes.ResponseSingle-services_TaskResponse'
      summary: Get a task by ID
      tags:
      - Task
  /task/{taskId}/stream:
    get:
      description: The task represents a background job that can be run by the system.
        This endpoint streams the response
      parameters:
      - description: The task ID
        in: path
        name: taskId
        required: true
        type: string
      produces:
      - application/json
      responses: {}
      summary: Get a task by ID but stream the response
      tags:
      - Task
produces:
- application/json
schemes:
- http
- https
swagger: "2.0"
